#N canvas 1058 148 696 584 10;
#X obj 22 143 cnv 15 200 60 empty empty explosion_du_bateau 20 12 0
14 -232576 -66577 0;
#N canvas 619 75 550 386 explo 0;
#X obj 115 23 r coords_\$1;
#X obj 115 50 unpack f f f;
#X floatatom 115 73 5 0 0 0 - - -;
#X floatatom 149 73 5 0 0 0 - - -;
#X obj 112 193 translateXYZ;
#X obj 112 220 pix_buffer_read explo;
#X obj 112 270 square 0.5;
#X obj 112 244 pix_texture;
#X obj 112 168 alpha;
#X obj 25 201 loadbang;
#X msg 25 227 quality 0;
#X obj 112 144 gemhead 100;
#X obj 235 195 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 235 94 loadbang;
#X msg 235 117 0;
#X obj 317 75 t b b;
#X msg 386 99 1;
#X obj 317 43 r explosion_\$1;
#X obj 235 171 metro 200;
#X obj 317 100 delay 700;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 4 1;
#X connect 3 0 4 2;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 7 0 6 0;
#X connect 8 0 4 0;
#X connect 9 0 10 0;
#X connect 10 0 7 0;
#X connect 11 0 8 0;
#X connect 12 0 5 1;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X connect 14 0 18 0;
#X connect 15 0 19 0;
#X connect 15 1 16 0;
#X connect 16 0 11 0;
#X connect 16 0 18 0;
#X connect 17 0 15 0;
#X connect 18 0 12 0;
#X connect 19 0 14 0;
#X restore 44 177 pd explo;
#X obj 22 211 cnv 15 150 60 empty empty vie_du_bateau 20 12 0 14 -45076
-262144 0;
#N canvas 337 148 899 493 vie 0;
#X obj 282 146 translateXYZ;
#X obj 282 50 separator;
#X obj 282 261 pix_texture;
#X msg 206 229 quality 0;
#X obj 206 209 loadbang;
#X obj 282 27 alpha;
#X obj 282 221 pix_buffer_read vie;
#X floatatom 298 109 5 0 0 0 - - -;
#X obj 356 31 \$1;
#X obj 356 4 loadbang;
#X obj 282 297 square 1;
#X msg 390 91 -2.6;
#X obj 356 56 expr if ($f1 > 1 \, 4.7 \, -4.8) \;;
#X floatatom 579 164 5 0 0 0 - - -;
#X obj 613 54 r explosion_\$1;
#X obj 579 218 sel 1;
#X obj 579 268 s mort_\$1;
#X obj 282 4 gemhead 90;
#X obj 641 205 s vie_\$1;
#X obj 644 267 s fin_du_jeu;
#X obj 579 196 < 1;
#N canvas 302 80 780 577 semer_vie 0;
#X obj 162 404 translateXYZ;
#X obj 162 518 pix_texture;
#X msg 79 501 quality 0;
#X obj 79 478 loadbang;
#X obj 322 169 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 322 145 1;
#X obj 162 69 loadbang;
#X msg 165 104 0;
#X obj 230 68 r reset;
#X obj 358 342 pack f f;
#X msg 791 82 0;
#X obj 322 72 spigot;
#X msg 416 55 1;
#X obj 416 33 r reset;
#X obj 791 58 sel 1;
#X obj 791 35 <= 1;
#X obj 791 6 r vie_\$2;
#X floatatom 855 35 5 0 0 0 - - -;
#X obj 156 181 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 273 425 loadbang;
#X floatatom 322 262 5 0 0 0 - - -;
#X floatatom 451 256 5 0 0 0 - - -;
#X obj 162 310 alpha;
#X obj 162 469 pix_buffer_read vie;
#X obj 358 365 s coords_new_vie_\$1;
#X obj 322 33 r vie_\$1;
#X obj 322 94 sel 1;
#N canvas 326 87 951 542 calc_coords_new_vie 0;
#X obj 250 80 inlet;
#X obj 313 450 outlet x;
#X obj 376 451 outlet y;
#X text 964 342 si distance pas atteinte \, creation de nouvelles positions
;
#X text 393 130 creation d'un nombre aleatoire \; pour x et y du nouveau
boulet;
#X text 433 17 principe : des coords sont crees \, puis stockees provisoirement
dans des [f]. Elles sont ensuite testees. Si elles correspondent \,
les [f] sont bangés pour outputer les coords \, sinon le processus
recommence jusqu'a ce que ça marche;
#N canvas 942 335 450 359 crea_coords 0;
#X obj 39 139 / 100;
#X obj 246 116 loadbang;
#X obj 197 116 r reset;
#X obj 246 139 \$1;
#X obj 330 139 / 100;
#X obj 180 42 inlet;
#X obj 180 66 t b b;
#X obj 39 213 outlet x;
#X obj 330 213 outlet y;
#X obj 39 116 random 500;
#X obj 39 162 expr if($f2 == 1 \, $f1-6 \, $f1+1);
#X obj 330 116 random 650;
#X obj 330 162 - 3.25;
#X connect 0 0 10 0;
#X connect 1 0 3 0;
#X connect 2 0 3 0;
#X connect 3 0 10 1;
#X connect 4 0 12 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 11 0;
#X connect 9 0 0 0;
#X connect 10 0 7 0;
#X connect 11 0 4 0;
#X connect 12 0 8 0;
#X restore 294 143 pd crea_coords;
#X obj 250 112 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 294 195 5 0 0 0 - - -;
#X floatatom 375 195 5 0 0 0 - - -;
#X text 293 275 d = √( x2 - x1 )² + ( y2 - y1 )²);
#X obj 459 174 r coords_\$1;
#X obj 459 195 unpack f f f;
#X floatatom 294 299 5 0 0 0 - - -;
#X text 634 257 comparaison avec le position du bateau \; output :
1 si OK \, 0 si trop proche;
#X obj 294 327 sel 0 1;
#X obj 313 378 f;
#X obj 376 378 f;
#X floatatom 313 421 5 0 0 0 - - -;
#X floatatom 376 419 5 0 0 0 - - -;
#X obj 294 258 expr if( sqrt( pow( $f1-$f2 \, 2 )+ pow( $f3 - $f4 \,
2 ) ) >2.8 \, 1 \, 0 );
#X text 441 334 si 1 => creation de nouvelles coords \; si 0 => bang
des [f] pour output;
#X text 22 8 ce sous patch permet de creer un nouveau boulet à une
distance maximale du bateau (pour les faire courir un peu);
#X connect 0 0 7 0;
#X connect 6 0 8 0;
#X connect 6 1 9 0;
#X connect 7 0 6 0;
#X connect 8 0 16 1;
#X connect 8 0 20 0;
#X connect 9 0 17 1;
#X connect 9 0 20 2;
#X connect 11 0 12 0;
#X connect 12 0 20 1;
#X connect 12 1 20 3;
#X connect 13 0 15 0;
#X connect 15 0 7 0;
#X connect 15 1 17 0;
#X connect 15 1 16 0;
#X connect 16 0 18 0;
#X connect 17 0 19 0;
#X connect 18 0 1 0;
#X connect 19 0 2 0;
#X connect 20 0 13 0;
#X restore 322 221 pd calc_coords_new_vie;
#X obj 24 224 s new_vie_active_\$1;
#X obj 57 52 r vie_chopee_\$1;
#X obj 322 119 randomdelay 1000 1500;
#X text 480 119 delai entre 1 et 1.5 sec;
#X text 485 201 calcul savant des coordonnees \; pour ne pas que la
vie aparaisse \; trop proche du bateau;
#X text 498 160 delai ou on a le temps de choper la vie;
#X msg 273 447 4;
#X obj 162 547 square 0.25;
#X obj 162 225 gemhead 95;
#X obj 335 190 delay 5000;
#X obj 392 161 r delai_new_vie;
#X connect 0 0 23 0;
#X connect 1 0 35 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 27 0;
#X connect 4 0 37 0;
#X connect 5 0 18 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X connect 7 0 18 0;
#X connect 8 0 7 0;
#X connect 9 0 24 0;
#X connect 11 0 26 0;
#X connect 12 0 11 1;
#X connect 13 0 12 0;
#X connect 14 0 10 0;
#X connect 15 0 14 0;
#X connect 16 0 15 0;
#X connect 16 0 17 0;
#X connect 18 0 28 0;
#X connect 18 0 36 0;
#X connect 19 0 34 0;
#X connect 20 0 9 0;
#X connect 20 0 0 1;
#X connect 21 0 9 1;
#X connect 21 0 0 2;
#X connect 22 0 0 0;
#X connect 23 0 1 0;
#X connect 25 0 11 0;
#X connect 26 0 30 0;
#X connect 27 0 20 0;
#X connect 27 1 21 0;
#X connect 29 0 7 0;
#X connect 30 0 5 0;
#X connect 34 0 23 1;
#X connect 36 0 22 0;
#X connect 37 0 7 0;
#X connect 38 0 37 1;
#X restore 24 -1 pd semer_vie;
#X text 27 18 permet de donner de la vie \; aux bateaux mourants;
#N canvas 431 126 450 520 ramasse_vie 0;
#X obj 101 29 r coords_\$1;
#X floatatom 101 159 5 0 0 0 - - -;
#X floatatom 226 159 5 0 0 0 - - -;
#X obj 101 92 unpack f f f;
#X floatatom 145 159 5 0 0 0 - - -;
#X floatatom 275 159 5 0 0 0 - - -;
#X obj 145 184 t b f;
#X obj 275 184 t b f;
#X obj 226 184 t b f;
#X obj 101 276 expr sqrt( pow( $f1-$f2 \, 2 )+ pow( $f3 - $f4 \, 2
) );
#X text 131 295 d = √( x2 - x1 )² + ( y2 - y1 )²);
#X floatatom 101 317 5 0 0 0 - - -;
#X obj 247 49 unpack f f;
#X obj 101 402 < 0.8;
#X obj 101 372 spigot;
#X obj 101 432 sel 1;
#X obj 247 24 r coords_new_vie_\$1;
#X obj 200 335 r new_vie_active_\$1;
#X obj 101 464 s vie_chopee_\$1;
#X connect 0 0 3 0;
#X connect 1 0 9 0;
#X connect 2 0 8 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 9 0;
#X connect 6 1 9 1;
#X connect 7 0 9 0;
#X connect 7 1 9 3;
#X connect 8 0 9 0;
#X connect 8 1 9 2;
#X connect 9 0 11 0;
#X connect 11 0 14 0;
#X connect 12 0 4 0;
#X connect 12 1 5 0;
#X connect 13 0 15 0;
#X connect 14 0 13 0;
#X connect 15 0 18 0;
#X connect 16 0 12 0;
#X connect 17 0 14 1;
#X restore 22 66 pd ramasse_vie;
#X text 130 60 permet de ramasser \; la vie;
#X obj 579 101 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 613 101 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 648 83 r reset;
#X msg 648 107 3;
#X obj 579 133 compteur 0 3;
#X obj 579 33 r vie_chopee_\$1;
#X connect 0 0 6 0;
#X connect 1 0 0 0;
#X connect 2 0 10 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X connect 7 0 0 1;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 9 0 11 0;
#X connect 11 0 0 2;
#X connect 12 0 7 0;
#X connect 13 0 6 1;
#X connect 13 0 18 0;
#X connect 13 0 20 0;
#X connect 14 0 26 0;
#X connect 15 0 16 0;
#X connect 15 0 19 0;
#X connect 17 0 5 0;
#X connect 20 0 15 0;
#X connect 25 0 29 0;
#X connect 26 0 29 1;
#X connect 27 0 28 0;
#X connect 28 0 29 2;
#X connect 29 0 13 0;
#X connect 30 0 25 0;
#X restore 45 234 pd vie;
#X obj 22 280 cnv 15 150 60 empty empty texte_victoire 20 12 0 14 -86277
-262144 0;
#X obj 22 75 cnv 15 200 60 empty empty Dessin_du_bateau 20 12 0 14
-191407 -66577 0;
#X obj 495 42 inlet;
#X obj 495 266 spigot;
#X obj 495 296 s fire_\$1;
#N canvas 728 97 543 469 win_text 0;
#X obj 180 265 text3d;
#X obj 194 187 loadbang;
#X obj 48 28 r mort_\$1;
#X msg 180 66 0;
#X msg 48 72 1;
#X obj 180 19 r reset;
#X obj 48 51 delay 2500;
#X msg 214 235 11;
#X obj 48 209 gemhead 58;
#X obj 48 237 alpha;
#X obj 180 142 colorRGB 1 1 1;
#X msg 191 213 font minecrafter_3.ttf;
#X obj 48 340 pix_image;
#X obj 54 377 pix_texture;
#X msg 312 318 open ../images/parchemin.tif;
#X msg 162 340 quality 0;
#X obj 55 412 rectangle 6 1;
#X obj 48 265 translateXYZ 0 1.5 0;
#X obj 222 301 loadbang;
#X obj 180 165 translateXYZ 0 1.6 0;
#X obj 335 155 \$2;
#X obj 180 119 gemhead 65;
#X msg 335 227 text l'equipe \$1 gagne !!!;
#X connect 1 0 11 0;
#X connect 1 0 7 0;
#X connect 2 0 6 0;
#X connect 3 0 8 0;
#X connect 3 0 21 0;
#X connect 4 0 8 0;
#X connect 4 0 21 0;
#X connect 5 0 3 0;
#X connect 5 0 20 0;
#X connect 6 0 4 0;
#X connect 7 0 0 1;
#X connect 8 0 9 0;
#X connect 9 0 17 0;
#X connect 10 0 19 0;
#X connect 11 0 0 0;
#X connect 12 0 13 0;
#X connect 13 0 16 0;
#X connect 14 0 12 0;
#X connect 15 0 13 0;
#X connect 17 0 12 0;
#X connect 18 0 14 0;
#X connect 18 0 15 0;
#X connect 19 0 0 0;
#X connect 20 0 22 0;
#X connect 21 0 10 0;
#X connect 22 0 0 0;
#X restore 45 309 pd win_text;
#X obj 22 349 cnv 15 150 60 empty empty gestion_boulet 20 12 0 14 -99865
-262144 0;
#N canvas 595 241 1108 548 affichage 1;
#X obj 21 95 alpha;
#X obj 526 385 pix_texture;
#X msg 535 358 quality 0;
#X obj 535 338 loadbang;
#X obj 661 104 r reset;
#X obj 98 358 pix_texture;
#X msg 21 341 quality 0;
#X obj 21 321 loadbang;
#X obj 98 308 pix_buffer_read ship;
#X obj 215 124 r reset;
#X msg 215 150 0;
#X obj 661 231 metro 600;
#X msg 661 207 1;
#X obj 661 254 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 526 210 alpha;
#X obj 21 72 gemhead 55;
#X obj 526 187 gemhead 50;
#X msg 526 139 0;
#X obj 278 14 cnv 15 200 160 empty empty animation_bateau_coule 20
12 0 14 -204786 -1 0;
#X obj 294 42 r mort_\$1;
#X obj 379 85 delay 1000;
#X msg 294 94 1;
#X obj 294 68 t b b;
#X obj 852 418 pix_texture;
#X msg 864 387 quality 0;
#X obj 864 367 loadbang;
#X obj 852 236 alpha;
#X obj 962 31 r vie_\$1;
#X floatatom 962 52 5 0 0 0 - - -;
#X obj 526 275 pix_buffer_read sillage;
#X obj 852 328 pix_buffer_read degats;
#X obj 981 270 metro 600;
#X obj 981 298 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X msg 981 184 1;
#X obj 661 181 delay;
#X obj 661 129 random 150;
#X obj 661 153 t b f;
#N canvas 475 379 450 300 position_boat 0;
#X obj 109 51 inlet;
#X obj 109 191 outlet;
#X obj 151 94 unpack 0 0 0;
#X obj 109 125 translateXYZ;
#X obj 109 152 rotateXYZ;
#X obj 151 66 r coords_\$1;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 2 1 3 2;
#X connect 2 2 4 3;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X restore 21 126 pd position_boat;
#N canvas 475 379 450 300 position_boat 0;
#X obj 109 51 inlet;
#X obj 109 191 outlet;
#X obj 151 94 unpack 0 0 0;
#X obj 109 125 translateXYZ;
#X obj 109 152 rotateXYZ;
#X obj 151 66 r coords_\$1;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 2 1 3 2;
#X connect 2 2 4 3;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X restore 526 242 pd position_boat;
#N canvas 475 379 450 300 position_boat 0;
#X obj 109 51 inlet;
#X obj 109 191 outlet;
#X obj 151 94 unpack 0 0 0;
#X obj 109 125 translateXYZ;
#X obj 109 152 rotateXYZ;
#X obj 151 66 r coords_\$1;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 2 1 3 2;
#X connect 2 2 4 3;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X restore 852 266 pd position_boat;
#X obj 379 108 t b b b b;
#X obj 852 112 r reset;
#X msg 852 184 0;
#X obj 21 19 r reset;
#X msg 21 45 1;
#X obj 852 143 t b b;
#X msg 940 184 0;
#X obj 962 76 == 1;
#X obj 567 113 r reset;
#X msg 567 139 1;
#X obj 962 99 sel 0 1;
#X obj 852 212 gemhead 56;
#X obj 155 400 r boatsize;
#X obj 852 473 square 0.8;
#X obj 909 446 r boatsize;
#X text 109 438 bateau;
#X text 522 447 sillage;
#X text 930 472 degats;
#X obj 98 423 square 0.6;
#X obj 282 198 counter;
#X floatatom 282 224 5 0 0 0 - - -;
#X obj 298 147 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 302 119 metro 800;
#X obj 282 248 sel 5;
#X msg 258 95 0;
#X obj 526 410 square 1;
#X obj 526 299 colorRGB 1 1 1 0.4;
#X obj 353 170 r clignote_\$1;
#X obj 353 197 sel 0 1;
#X msg 372 249 6;
#X connect 0 0 37 0;
#X connect 1 0 65 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 35 0;
#X connect 5 0 58 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 8 0 5 0;
#X connect 9 0 10 0;
#X connect 10 0 59 3;
#X connect 10 0 8 1;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 13 0 29 1;
#X connect 14 0 38 0;
#X connect 15 0 0 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 19 0 22 0;
#X connect 20 0 40 0;
#X connect 21 0 62 0;
#X connect 22 0 21 0;
#X connect 22 1 20 0;
#X connect 23 0 53 0;
#X connect 24 0 23 0;
#X connect 25 0 24 0;
#X connect 26 0 39 0;
#X connect 27 0 28 0;
#X connect 28 0 47 0;
#X connect 29 0 66 0;
#X connect 30 0 23 0;
#X connect 31 0 32 0;
#X connect 32 0 30 1;
#X connect 33 0 31 0;
#X connect 33 0 51 0;
#X connect 34 0 12 0;
#X connect 35 0 36 0;
#X connect 36 0 34 0;
#X connect 36 1 34 1;
#X connect 37 0 8 0;
#X connect 38 0 29 0;
#X connect 39 0 30 0;
#X connect 40 2 17 0;
#X connect 40 3 45 0;
#X connect 41 0 45 0;
#X connect 42 0 51 0;
#X connect 43 0 44 0;
#X connect 44 0 15 0;
#X connect 45 0 42 0;
#X connect 45 1 46 0;
#X connect 46 0 31 0;
#X connect 47 0 50 0;
#X connect 48 0 49 0;
#X connect 49 0 16 0;
#X connect 50 0 45 0;
#X connect 50 1 33 0;
#X connect 51 0 26 0;
#X connect 52 0 58 1;
#X connect 54 0 53 1;
#X connect 59 0 60 0;
#X connect 60 0 8 1;
#X connect 60 0 63 0;
#X connect 61 0 59 0;
#X connect 62 0 61 0;
#X connect 63 0 64 0;
#X connect 64 0 62 0;
#X connect 66 0 1 0;
#X connect 67 0 68 0;
#X connect 68 0 60 0;
#X connect 68 1 69 0;
#X connect 69 0 8 1;
#X restore 45 101 pd affichage;
#X obj 26 7 cnv 15 600 22 empty empty Abstraction_du_Bateau_\$1 150
12 0 20 -261234 -1 0;
#N canvas 1078 106 564 356 boulet 0;
#X obj 300 159 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 334 159 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 300 236 5 0 0 0 - - -;
#X obj 336 235 s nb_boulet_\$1;
#N canvas 726 56 1080 690 envoi_boulet 0;
#X obj 230 549 f;
#X msg 444 138 0.25;
#X obj 178 7 r fire_\$1;
#X obj 160 485 rotateXYZ;
#X obj 160 584 translateXYZ 0 0 0;
#X obj 160 191 gemhead 60;
#X obj 160 213 alpha;
#X obj 160 742 pix_texture;
#X msg 91 715 quality 0;
#X obj 91 695 loadbang;
#X obj 160 642 gemlist_info;
#X obj 160 772 square 0.1;
#X obj 382 32 r explosion_\$2;
#X obj 333 32 r reset;
#X text 258 633 récupère les coordonnees compilées du boulet (merci
mrpropre);
#X obj 160 710 pix_buffer_read boulet;
#X obj 289 669 loadbang;
#X msg 289 689 0;
#X obj 473 32 r fin_du_jeu;
#X obj 230 526 metro 15;
#X obj 204 364 f;
#X obj 238 364 f;
#X obj 273 364 f;
#X obj 219 281 r coords_\$1;
#X obj 219 316 unpack f f f;
#X obj 178 58 t b b b b;
#X msg 376 180 1;
#X msg 410 138 0;
#X obj 393 91 t b b b b;
#X text 607 51 au tir \; - bang coords bateau \; - allume metro boulet
\; - allume gemhead boulet \; - test collision \; \; au bout de 2 secondes
\; OU au reset \; OU explosion de l'autre bateau \; OU fin du jeu \;
- eteint metro boulet \; - eteint gemhead boulet \; - replace boulet
la ou il est parti \; - reinitialiser le resultat de la collision \;
;
#X obj 589 692 outlet;
#X obj 160 405 translateXYZ 0 0 0;
#X msg 160 121 1;
#X obj 31 121 s boulet_lance_\$1;
#X text 33 139 son & compteur;
#X obj 178 32 bangdelay 5000;
#X obj 259 7 r reset;
#X obj 503 504 r reset;
#X obj 292 522 r vitesse_boulet;
#X obj 259 549 + 0.06;
#X obj 314 5 r delai_recharge;
#X connect 0 0 4 2;
#X connect 0 0 39 0;
#X connect 1 0 0 0;
#X connect 2 0 35 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 5 0 6 0;
#X connect 6 0 31 0;
#X connect 7 0 11 0;
#X connect 8 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 15 0;
#X connect 10 4 30 0;
#X connect 12 0 28 0;
#X connect 13 0 28 0;
#X connect 15 0 7 0;
#X connect 16 0 17 0;
#X connect 17 0 15 1;
#X connect 18 0 28 0;
#X connect 19 0 0 0;
#X connect 20 0 31 1;
#X connect 21 0 31 2;
#X connect 22 0 3 3;
#X connect 23 0 24 0;
#X connect 24 0 20 1;
#X connect 24 1 21 1;
#X connect 24 2 22 1;
#X connect 25 0 33 0;
#X connect 25 1 32 0;
#X connect 25 2 26 0;
#X connect 25 3 22 0;
#X connect 25 3 21 0;
#X connect 25 3 20 0;
#X connect 26 0 19 0;
#X connect 27 0 5 0;
#X connect 27 0 19 0;
#X connect 28 1 27 0;
#X connect 28 3 1 0;
#X connect 31 0 3 0;
#X connect 32 0 5 0;
#X connect 35 0 25 0;
#X connect 35 1 28 0;
#X connect 36 0 35 1;
#X connect 37 0 17 0;
#X connect 38 0 39 1;
#X connect 39 0 0 1;
#X connect 40 0 35 2;
#X restore 19 69 pd envoi_boulet;
#X obj 300 47 r boulet_chope_\$1;
#X text 123 235 permet de creer \; les boulets a ramasser;
#X text 127 265 permet de ramasser \; les boulets;
#N canvas 645 77 1118 699 semer_boulets 0;
#X obj 162 444 translateXYZ;
#X obj 162 558 pix_texture;
#X msg 79 541 quality 0;
#X obj 79 518 loadbang;
#X obj 162 587 square 0.2;
#X obj 322 259 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 322 33 r nb_boulet_\$1;
#X obj 322 65 sel 0;
#X msg 322 215 1;
#X obj 162 69 loadbang;
#X msg 162 93 0;
#X obj 230 68 r reset;
#X obj 429 530 s coords_new_boulet_\$1;
#X obj 429 507 pack f f;
#X obj 50 32 r boulet_chope_\$1;
#X obj 24 264 s new_boulet_actif_\$1;
#N canvas 284 85 951 542 calc_coords_new_boulet 0;
#X obj 293 61 inlet;
#X obj 313 450 outlet x;
#X obj 376 451 outlet y;
#X text 22 8 ce sous patch permet de creer un nouveau boulet à une
distance minimale du bateau (pour les faire courir un peu);
#X text 964 342 si distance pas atteinte \, creation de nouvelles positions
;
#X text 393 130 creation d'un nombre aleatoire \; pour x et y du nouveau
boulet;
#X text 433 17 principe : des coords sont crees \, puis stockees provisoirement
dans des [f]. Elles sont ensuite testees. Si elles correspondent \,
les [f] sont bangés pour outputer les coords \, sinon le processus
recommence jusqu'a ce que ça marche;
#N canvas 561 219 450 359 crea_coords 0;
#X obj 39 139 / 100;
#X obj 246 116 loadbang;
#X obj 197 116 r reset;
#X obj 246 139 \$1;
#X obj 330 139 / 100;
#X obj 180 42 inlet;
#X obj 180 66 t b b;
#X obj 39 213 outlet x;
#X obj 330 213 outlet y;
#X obj 39 116 random 500;
#X obj 39 162 expr if($f2 == 1 \, $f1-6 \, $f1+1);
#X floatatom 128 212 5 0 0 0 - - -;
#X obj 330 116 random 650;
#X obj 330 162 - 3.25;
#X connect 0 0 10 0;
#X connect 1 0 3 0;
#X connect 2 0 3 0;
#X connect 3 0 10 1;
#X connect 4 0 13 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 12 0;
#X connect 9 0 0 0;
#X connect 10 0 7 0;
#X connect 10 0 11 0;
#X connect 12 0 4 0;
#X connect 13 0 8 0;
#X restore 294 143 pd crea_coords;
#X obj 245 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 294 195 5 0 0 0 - - -;
#X floatatom 375 195 5 0 0 0 - - -;
#X text 293 275 d = √( x2 - x1 )² + ( y2 - y1 )²);
#X obj 459 174 r coords_\$1;
#X obj 459 195 unpack f f f;
#X floatatom 294 299 5 0 0 0 - - -;
#X text 634 257 comparaison avec le position du bateau \; output :
1 si OK \, 0 si trop proche;
#X obj 294 327 sel 0 1;
#X obj 313 378 f;
#X obj 376 378 f;
#X floatatom 313 421 5 0 0 0 - - -;
#X floatatom 376 419 5 0 0 0 - - -;
#X obj 294 258 expr if( sqrt( pow( $f1-$f2 \, 2 )+ pow( $f3 - $f4 \,
2 ) ) >2.8 \, 1 \, 0 );
#X text 441 334 si 1 => creation de nouvelles coords \; si 0 => bang
des [f] pour output;
#X connect 0 0 8 0;
#X connect 7 0 9 0;
#X connect 7 1 10 0;
#X connect 8 0 7 0;
#X connect 9 0 17 1;
#X connect 9 0 21 0;
#X connect 10 0 18 1;
#X connect 10 0 21 2;
#X connect 12 0 13 0;
#X connect 13 0 21 1;
#X connect 13 1 21 3;
#X connect 14 0 16 0;
#X connect 16 0 8 0;
#X connect 16 1 18 0;
#X connect 16 1 17 0;
#X connect 17 0 19 0;
#X connect 18 0 20 0;
#X connect 19 0 1 0;
#X connect 20 0 2 0;
#X connect 21 0 14 0;
#X restore 322 281 pd calc_coords_new_boulet;
#X msg 791 82 0;
#X obj 322 142 spigot;
#X msg 421 125 1;
#X obj 421 103 r reset;
#X text 512 49 dès que nb_boulet est a 0 dans un delai \; entre 1
et 4 sec \, faire apparaitre une \; boite avec un boulet dans la zone
du bateau;
#X obj 791 58 sel 1;
#X obj 791 35 <= 1;
#X obj 791 6 r vie_\$2;
#X floatatom 855 35 5 0 0 0 - - -;
#X obj 162 232 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 162 509 pix_buffer_read new_boulet;
#X obj 315 464 loadbang;
#X msg 315 486 0;
#X text 485 271 calcul savant des coordonnees \; pour ne pas que le
boulet aparaisse \; trop proche du bateau;
#X floatatom 316 343 5 0 0 0 - - -;
#X floatatom 443 344 5 0 0 0 - - -;
#X obj 162 350 alpha;
#X obj 459 142 r fin_du_jeu;
#X msg 459 170 0;
#N canvas 950 399 450 300 delai 0;
#X obj 148 104 random 3000;
#X obj 97 11 inlet;
#X obj 97 205 outlet;
#X obj 148 131 + 3000;
#X obj 97 157 del 3000;
#X obj 97 53 t b b;
#X obj 249 49 r delai_new_boulet;
#X obj 249 78 unpack f f;
#X connect 0 0 3 0;
#X connect 1 0 5 0;
#X connect 3 0 4 1;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 5 1 0 0;
#X connect 6 0 7 0;
#X connect 7 0 0 1;
#X connect 7 1 3 1;
#X restore 322 119 pd delai;
#X obj 162 265 gemhead 96;
#X connect 0 0 27 0;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 5 0 16 0;
#X connect 6 0 7 0;
#X connect 7 0 36 0;
#X connect 8 0 26 0;
#X connect 8 0 5 0;
#X connect 9 0 10 0;
#X connect 10 0 26 0;
#X connect 11 0 10 0;
#X connect 13 0 12 0;
#X connect 14 0 10 0;
#X connect 16 0 0 1;
#X connect 16 0 31 0;
#X connect 16 1 0 2;
#X connect 16 1 32 0;
#X connect 18 0 8 0;
#X connect 19 0 18 1;
#X connect 20 0 19 0;
#X connect 22 0 17 0;
#X connect 23 0 22 0;
#X connect 24 0 23 0;
#X connect 24 0 25 0;
#X connect 26 0 15 0;
#X connect 26 0 37 0;
#X connect 27 0 1 0;
#X connect 28 0 29 0;
#X connect 29 0 27 1;
#X connect 31 0 13 0;
#X connect 32 0 13 1;
#X connect 33 0 0 0;
#X connect 34 0 35 0;
#X connect 35 0 18 1;
#X connect 36 0 18 0;
#X connect 37 0 33 0;
#X restore 20 241 pd semer_boulets;
#N canvas 144 91 450 520 ramasse_boulet 0;
#X obj 247 24 r coords_new_boulet_\$1;
#X obj 101 29 r coords_\$1;
#X floatatom 101 159 5 0 0 0 - - -;
#X floatatom 226 159 5 0 0 0 - - -;
#X obj 101 92 unpack f f f;
#X floatatom 145 159 5 0 0 0 - - -;
#X floatatom 275 159 5 0 0 0 - - -;
#X obj 145 184 t b f;
#X obj 275 184 t b f;
#X obj 226 184 t b f;
#X obj 101 276 expr sqrt( pow( $f1-$f2 \, 2 )+ pow( $f3 - $f4 \, 2
) );
#X text 131 295 d = √( x2 - x1 )² + ( y2 - y1 )²);
#X floatatom 101 317 5 0 0 0 - - -;
#X obj 247 49 unpack f f;
#X obj 101 402 < 0.8;
#X obj 101 464 s boulet_chope_\$1;
#X obj 200 335 r new_boulet_actif_\$1;
#X obj 101 372 spigot;
#X obj 101 432 sel 1;
#X connect 0 0 13 0;
#X connect 1 0 4 0;
#X connect 2 0 10 0;
#X connect 3 0 9 0;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 10 0;
#X connect 7 1 10 1;
#X connect 8 0 10 0;
#X connect 8 1 10 3;
#X connect 9 0 10 0;
#X connect 9 1 10 2;
#X connect 10 0 12 0;
#X connect 12 0 17 0;
#X connect 13 0 5 0;
#X connect 13 1 6 0;
#X connect 14 0 18 0;
#X connect 16 0 17 1;
#X connect 17 0 14 0;
#X connect 18 0 15 0;
#X restore 19 271 pd ramasse_boulet;
#N canvas 682 113 624 362 affichage_qte_boulets 0;
#X obj 49 31 alpha;
#X obj 49 286 pix_texture;
#X obj 253 197 r nb_boulet_\$1;
#X obj 49 310 square 0.3;
#X obj 535 157 loadbang;
#X msg 131 269 quality 0;
#X obj 131 245 loadbang;
#X obj 88 86 \$1;
#X obj 88 54 loadbang;
#X obj 239 258 text3d;
#X obj 49 221 pix_buffer_read boulet;
#X msg 148 190 0;
#X obj 88 113 expr if($f1 < 2 \, -6 \, 4.4) \;;
#X obj 49 7 gemhead 80;
#X msg 331 229 font minecrafter_3.ttf;
#X msg 511 226 7;
#X obj 239 171 translateXYZ 1 0 0;
#X obj 148 169 r reset;
#X obj 49 136 translateXYZ 0 3.4 0;
#X msg 253 228 text x \$1;
#X connect 0 0 18 0;
#X connect 1 0 3 0;
#X connect 2 0 19 0;
#X connect 4 0 15 0;
#X connect 4 0 14 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 12 0;
#X connect 8 0 7 0;
#X connect 10 0 1 0;
#X connect 11 0 10 1;
#X connect 12 0 18 1;
#X connect 13 0 0 0;
#X connect 14 0 9 0;
#X connect 15 0 9 1;
#X connect 16 0 9 0;
#X connect 17 0 11 0;
#X connect 18 0 10 0;
#X connect 18 0 16 0;
#X connect 19 0 9 0;
#X restore 19 8 pd affichage_qte_boulets;
#X obj 334 80 r boulet_lance_\$1;
#N canvas 201 30 1010 634 collision 0;
#X floatatom -79 120 5 0 0 0 - - -;
#X floatatom 96 120 5 0 0 0 - - -;
#X obj -79 53 unpack f f f;
#X floatatom 22 120 5 0 0 0 - - -;
#X floatatom 224 120 5 0 0 0 - - -;
#X obj 61 53 unpack f f f;
#X obj 96 143 t b f;
#X obj 61 21 r coords_\$2;
#X obj -79 542 sel 1;
#X obj -79 597 s explosion_\$2;
#X text 16 526 pour eviter une double-explosion;
#X floatatom -23 499 5 0 0 0 - - -;
#X obj -79 517 &&;
#X text 197 266 si le boulet est proche (< 0.8) et que le bateau ennemi
n'est pas invincible (apres avoir ete touché) => collision;
#X obj -23 474 r vulnerable_\$2;
#X obj -79 237 expr sqrt( pow( $f1-$f2 \, 2 )+ pow( $f3 - $f4 \, 2
) );
#X text 42 219 d = √( ( x2 - x1 )² + ( y2 - y1 )²);
#X obj -79 27 inlet;
#X text -114 4 coords boulet;
#X obj -46 354 r fire_\$1;
#X obj -46 376 del 100;
#X obj -79 457 spigot;
#X msg -46 428 1;
#X msg 34 430 0;
#X text 102 327 cette merde est la car sinon le resultaat de l'opération
restait bloque a une valeur < a 0.8 n cas d'explosion aavant \, et
donc reexplosait direct \, donc comme ca on s'en sort un peu. Le delai
lui laisse le temps de se recalculer pour ne pas peter tout de suite
;
#X obj -79 336 < 0.6;
#X obj -67 287 r boatsize;
#X obj -68 314 t b f;
#X obj -79 568 bangdelay 200;
#X obj -47 398 bangdelay 5000;
#X connect 0 0 15 0;
#X connect 1 0 6 0;
#X connect 2 0 0 0;
#X connect 2 1 1 0;
#X connect 3 0 15 1;
#X connect 4 0 15 3;
#X connect 5 0 3 0;
#X connect 5 1 4 0;
#X connect 6 0 15 0;
#X connect 6 1 15 2;
#X connect 7 0 5 0;
#X connect 8 0 28 0;
#X connect 11 0 12 1;
#X connect 12 0 8 0;
#X connect 14 0 11 0;
#X connect 15 0 25 0;
#X connect 17 0 2 0;
#X connect 19 0 20 0;
#X connect 20 0 29 0;
#X connect 21 0 12 0;
#X connect 22 0 21 1;
#X connect 23 0 21 1;
#X connect 25 0 21 0;
#X connect 26 0 27 0;
#X connect 27 0 25 0;
#X connect 27 1 25 1;
#X connect 28 0 9 0;
#X connect 29 0 22 0;
#X connect 29 1 23 0;
#X restore 19 90 pd collision;
#X text 112 92 collision entre bateau et boulet;
#N canvas 688 162 1130 769 jauge_recharge 0;
#X obj 28 284 gemhead 70;
#X obj 28 423 rectangle 1.5 0.2;
#X msg 42 394 draw line;
#X msg 107 394 width 4;
#X obj 42 366 r reset;
#X obj 335 199 gemhead 69;
#X obj 335 447 rectangle 1.5 0.2;
#X obj 335 336 colorRGB 0 1 0;
#X floatatom 672 92 5 0 0 0 - - -;
#X obj 335 415 translateXYZ;
#X obj 358 391 expr ($f1) -1.5;
#X obj 663 179 gemhead 71;
#X msg 708 367 4;
#X obj 672 -119 t b b;
#X msg 699 -6 0;
#X floatatom 161 60 5 0 0 0 - - -;
#X obj 677 316 r reset;
#X msg 677 342 font minecrafter_3.ttf;
#X obj 161 -19 loadbang;
#X obj 111 -19 r reset;
#X obj 161 37 expr if($f1 == 1 \, -2.5 \, 2);
#X obj 28 332 translateXYZ 0 3.4 0;
#X obj 335 360 translateXYZ 0 3.4 0;
#X obj 663 241 translateXYZ 0 3.4 0;
#X obj 672 72 line 0 100;
#X obj 779 -19 r reset;
#X msg 779 4 1.5;
#X obj 663 203 colorRGB 1 1 1;
#X obj 350 267 - 1;
#X obj 350 290 abs;
#X obj 375 231 maxlib/scale 0 1.5 0.1 1;
#X obj 848 227 sel 1.5;
#X obj 663 437 text3d;
#X msg 848 344 text pret;
#X msg 887 306 text recharge;
#X obj 687 -85 r delai_recharge;
#X obj 672 -38 prepend 1.5;
#X obj 672 -63 f;
#X obj 626 -164 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 24 445 dessin contour jauge;
#X text 334 465 dessin interieur jauge;
#X obj 672 -166 r boulet_lance_\$1;
#X obj 161 10 \$1;
#X connect 0 0 21 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 7 0;
#X connect 7 0 22 0;
#X connect 8 0 6 1;
#X connect 8 0 10 0;
#X connect 8 0 30 0;
#X connect 8 0 31 0;
#X connect 9 0 6 0;
#X connect 10 0 9 1;
#X connect 11 0 27 0;
#X connect 12 0 32 1;
#X connect 13 0 37 0;
#X connect 13 1 14 0;
#X connect 14 0 24 0;
#X connect 15 0 21 1;
#X connect 15 0 22 1;
#X connect 15 0 23 1;
#X connect 16 0 17 0;
#X connect 16 0 12 0;
#X connect 17 0 32 0;
#X connect 18 0 42 0;
#X connect 19 0 42 0;
#X connect 20 0 15 0;
#X connect 21 0 1 0;
#X connect 22 0 9 0;
#X connect 23 0 32 0;
#X connect 24 0 8 0;
#X connect 25 0 26 0;
#X connect 26 0 24 0;
#X connect 27 0 23 0;
#X connect 28 0 29 0;
#X connect 29 0 7 1;
#X connect 30 0 7 2;
#X connect 30 0 28 0;
#X connect 31 0 33 0;
#X connect 31 1 34 0;
#X connect 33 0 32 0;
#X connect 34 0 32 0;
#X connect 35 0 37 1;
#X connect 36 0 24 0;
#X connect 37 0 36 0;
#X connect 38 0 13 0;
#X connect 41 0 13 0;
#X connect 42 0 20 0;
#X restore 21 208 pd jauge_recharge;
#X obj 300 191 compteur 0 6;
#N canvas 1267 258 450 300 boulet_eventail 0;
#X restore 23 143 pd boulet_eventail;
#X obj 369 159 r nb_blts_init;
#X connect 0 0 15 0;
#X connect 1 0 15 1;
#X connect 4 0 12 0;
#X connect 5 0 0 0;
#X connect 11 0 1 0;
#X connect 15 0 2 0;
#X connect 15 0 3 0;
#X connect 17 0 15 2;
#X restore 44 376 pd boulet;
#X msg 563 135 0;
#X obj 563 111 r fin_du_jeu;
#X obj 528 235 &&;
#X msg 596 156 1;
#X obj 596 135 r reset;
#X obj 563 199 t b f;
#X obj 22 419 cnv 15 260 60 empty empty invincibilite_et_clignotement
20 12 0 14 -203904 -262144 0;
#N canvas 363 112 678 421 invincibilte 0;
#X obj 99 9 r explosion_\$1;
#X obj 117 145 r reset;
#X obj 60 241 s vulnerable_\$1;
#X msg 79 208 1;
#X msg 60 93 0;
#X obj 216 320 s clignote_\$1;
#X obj 216 215 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 266 128 1;
#X msg 214 132 0;
#X obj 116 115 t b b b;
#X msg 120 185 1;
#X obj 99 36 t b b b;
#X obj 216 181 metro 250;
#X msg 159 183 0;
#X obj 403 244 r mort_\$1;
#X msg 403 266 0;
#X obj 216 283 spigot;
#X obj 333 177 r reset;
#X msg 333 201 1;
#X obj 116 93 delay 5000;
#X text 255 27 clignoter pdt 5 sec \; envoyer vulnerable à 0 \; au
bout de 5 sec : vunerable = 1;
#X obj 200 58 r delai_invincible;
#X connect 0 0 11 0;
#X connect 1 0 3 0;
#X connect 1 0 10 0;
#X connect 1 0 13 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 6 0 16 0;
#X connect 7 0 12 0;
#X connect 8 0 12 0;
#X connect 9 0 3 0;
#X connect 9 1 13 0;
#X connect 9 2 8 0;
#X connect 10 0 6 0;
#X connect 11 0 4 0;
#X connect 11 1 19 0;
#X connect 11 2 7 0;
#X connect 12 0 6 0;
#X connect 13 0 6 0;
#X connect 14 0 15 0;
#X connect 15 0 16 1;
#X connect 16 0 5 0;
#X connect 17 0 18 0;
#X connect 18 0 16 1;
#X connect 19 0 9 0;
#X connect 21 0 19 1;
#X restore 44 449 pd invincibilte;
#X obj 528 91 r nb_boulet_\$1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 14 0 19 0;
#X connect 15 0 14 0;
#X connect 16 0 7 1;
#X connect 17 0 19 0;
#X connect 18 0 17 0;
#X connect 19 0 16 0;
#X connect 19 1 16 1;
#X connect 22 0 16 0;
